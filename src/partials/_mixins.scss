@use 'sass:map';
@import '../../thyme.config.scss';

@function get-thyme-config($key, $value) {
  $v: map.get($key, $value);
  @if ($v) {
    @return map.get($key, $value);
  }
}

@mixin media-query($key) {
  $matched-breakpoint: map-get($breakpoints, $key);
  @if not $matched-breakpoint {
    // @warn #{ 'Breakpoint, ‘' + $key + '’ not found in `$thyme-config`. Make sure it’s set in the ‘breakpoints’ section.' };
  } @else {
    @media #{ $matched-breakpoint } {
      @content;
    }
  }
}

@mixin v-stack($size: 16px) {
  & > * + * {
    margin-top: $size;
  }
}

@mixin r-v-stack($responsiveProps) {
  // For initial width-breakpoint
  @include v-stack(map.get($responsiveProps, 'def'));
  // For larger widths
  @each $mqName, $propValue in $responsiveProps {
    @if ($mqName) {
      @include media-query($mqName) {
        @include v-stack($propValue);
      }
    }
  }
}

@mixin h-stack($size: 16px) {
  & > * + * {
    margin-left: $size;
  }
}

@mixin thyme_class($className, $properties, $tokens) {
  @each $name, $value in $tokens {
    @each $prop in $properties {
      .#{$className}#{$name} {
        #{$prop}: #{$value};
      }
    }
    @each $mq, $_ in $breakpoints {
      @include media-query($mq) {
        @each $prop in $properties {
          .#{$mq}\:#{$className}#{$name} {
            #{$prop}: #{$value};
          }
        }
      }
    }
  }
}

@mixin thyme_class_responsive($className, $css) {
  @each $name, $_ in $breakpoints {
    $prop: nth($css, 1);
    $value: nth($css, 2);
    .#{$className} {
      #{$prop}: #{$value};
    }
    @include media-query($name) {
      .#{$name}\:#{$className} {
        #{$prop}: #{$value};
      }
    }
  }
}
